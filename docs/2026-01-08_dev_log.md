# 2026-01-08 Development Summary

## Mixed Content Fix (Morning Session)
*   **Goal**: Resolve "Mixed Content" error on Android when accessing the local HTTP API.
*   **Key Changes**:
    *   **Capacitor Config**: Updated `capacitor.config.ts` to set `server.androidScheme` to `'http'`. This ensures the WebView loads content via HTTP (e.g., `http://localhost`) to match the backend protocol.
    *   **Android Manifest**: Added `android:usesCleartextTraffic="true"` to `AndroidManifest.xml` to allow insecure network requests for development.

## Vercel Deployment & Supabase Migration (Evening Session)
*   **Goal**: Fix Vercel 401 errors and resolve database connection failures.
*   **Key Changes**:
    1.  **Vercel Manifest Fix**:
        *   Resolved 401 error on `manifest.webmanifest`.
        *   Added **Cross-Origin Credentials** to the manifest link in `index.html`.
        *   Added explicit rewrite rule in `vercel.json` to bypass SPA catch-all.
    2.  **Supabase Migration**:
        *   Migrated from local DB to **Supabase** to fix Vercel connectivity.
        *   Diagnosed and fixed **Vercel IPv6 Error** (`Cannot assign requested address`) by switching to the **Transaction Pooler (Port 6543)**.
        *   Updated `backend/env.txt` and `config.py` to support `DATABASE_URL` override.
    3.  **Local Dev Troubleshooting**:
        *   Identified that local Python connections to Supabase were failing due to **DNS/Proxy hijacking** (fake IP `198.18.x.x`). Confirmed Vercel works fine despite local limitations.
    4.  **Dependency Fixes**:
        *   Removed legacy `passlib` to fix incompatibility with `bcrypt` 4.0 (`ValueError: password cannot be longer than 72 bytes`).
        *   Refactored `auth.py` to use `bcrypt` directly.
